**ASC训练营的回放,提取的关键点如下:**

主讲人提示说可以参照这张图进行训练过程性能提升分析,如

- 第一步坐标转化为相对坐标,需要对周围原子进行计算,最好对空间进行分块,因为GPU进行分块处理比较好.
- 两次反向求导计算量大.
- 不同元素需要不同网络模型,这里需要理解DP原理,input.json文件中type_oneside决定优化N个网络模型还是N*N个网络的模型.
- 自定义OP可以使用kernel fusion等优化策略.

![image-20220202013546048](C:\Users\86183\AppData\Roaming\Typora\typora-user-images\image-20220202013546048.png)

根据可以修改的三个参数跑一个baseline,以其性能作为基准,应该保证baseline预测的势能函数精度准确,然后看代码进行分析可以优化的地方,并且优化前和优化后baseline的精度和优化后的精度需要基本相同.

主要看相对提升量,绝对提升量是一个参考,也就是说我们选定一个baseline后进行优化,最终的相对提升量比较重要,三个数据集只需要做一套优化,然后进行测试就可以了.

主讲人给出的参数设置提示(自己还没测试):

- 单精度比双精度稍微快一些,且精度差不多
- 半精度可以更快,但是在求梯度的时候可能因为梯度比较大不能存储这么大的数,导致精度下降
- 混合精度优化的话,不能只通过修改input.json文件实现,需要自己指定网络中哪一部分用什么精度进行训练,并且需要保证bseline中使用的混合精度训练方式的和优化时混合精度训练方式一致



![image-20220202013721123](C:\Users\86183\AppData\Roaming\Typora\typora-user-images\image-20220202013721123.png)

![image-20220202020328523](C:\Users\86183\AppData\Roaming\Typora\typora-user-images\image-20220202020328523.png)







1. 可以写一个脚本来调三个参数得到不同baseline的性能,阅读源码和使用程序热点分析工具进行分析性能瓶颈,记录尝试的方法和过程
2. 根据图去分析性能瓶颈

